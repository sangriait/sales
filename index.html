<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CRMM - Operations & Department Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  </head>
  <body>
    <div class="app-shell">
      <aside class="sidebar">
        <div class="logo">CRMM</div>
        <nav class="main-nav">
          <button class="nav-item active" data-view="dashboard">Dashboard</button>
          <button class="nav-item" data-view="marketing">Marketing</button>
          <button class="nav-item" data-view="sales">Sales</button>
          <button class="nav-item" data-view="accounts">Accounts</button>
          <button class="nav-item" data-view="operations">Operations</button>
          <button class="nav-item" data-view="hr">Human Resources</button>
          <button class="nav-item" data-view="service">Client Service</button>
        </nav>
      </aside>

      <main class="main">
        <header class="topbar">
          <div>
            <h1 id="view-title">Dashboard</h1>
            <p id="view-subtitle">
              Overview of projects, departments, and performance.
            </p>
          </div>
          <div class="topbar-right">
            <div class="user-chip">
              <span class="user-role">Admin</span>
              <span class="user-name">Thanishka</span>
            </div>
            <button id="btn-logout" class="btn-secondary btn-logout">
              Logout
            </button>
          </div>
        </header>

        <section class="content">
          <!-- Global dashboard -->
          <section id="view-dashboard" class="view view-active">
            <div class="cards-grid">
              <div class="card kpi-card">
                <h3>Total Projects</h3>
                <p class="kpi-value" id="kpi-total-projects">0</p>
              </div>
              <div class="card kpi-card">
                <h3>Active Tasks</h3>
                <p class="kpi-value" id="kpi-active-tasks">0</p>
              </div>
              <div class="card kpi-card">
                <h3>Assigned Resources</h3>
                <p class="kpi-value" id="kpi-resources">0</p>
              </div>
              <div class="card kpi-card">
                <h3>On‑time Completion %</h3>
                <p class="kpi-value" id="kpi-on-time">0%</p>
              </div>
            </div>

            <div class="two-column chart-row">
              <div class="card">
                <h3>Task Status Overview</h3>
                <canvas id="chart-status"></canvas>
              </div>
              <div class="card">
                <h3>Department Workload</h3>
                <canvas id="chart-departments"></canvas>
              </div>
            </div>

            <div class="two-column">
              <div class="card">
                <h3>Department Performance</h3>
                <table class="table" id="table-departments">
                  <thead>
                    <tr>
                      <th>Department</th>
                      <th>Open Tasks</th>
                      <th>Completed</th>
                      <th>On‑time %</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
              <div class="card">
                <h3>Recent Activity</h3>
                <ul class="activity-list" id="activity-log"></ul>
              </div>
            </div>
          </section>

          <!-- Department screens backed by live data -->
          <section id="view-marketing" class="view">
            <div class="card">
              <h2>Marketing</h2>
              <p class="muted">
                Live view of marketing projects and tasks from Operations. Any
                Marketing project you add in Operations will appear here.
              </p>
              <table class="table">
                <thead>
                  <tr>
                    <th>Project</th>
                    <th>Type</th>
                    <th>Total Tasks</th>
                    <th>Open</th>
                    <th>Completed</th>
                  </tr>
                </thead>
                <tbody id="marketing-body"></tbody>
              </table>
            </div>
          </section>

          <section id="view-sales" class="view">
            <div class="card">
              <h2>Sales</h2>
              <p class="muted">
                Live view of sales projects and tasks. Any Sales project you
                manage in Operations will be reflected here.
              </p>
              <table class="table">
                <thead>
                  <tr>
                    <th>Project</th>
                    <th>Type</th>
                    <th>Total Tasks</th>
                    <th>Open</th>
                    <th>Completed</th>
                  </tr>
                </thead>
                <tbody id="sales-body"></tbody>
              </table>
            </div>
          </section>

          <section id="view-accounts" class="view">
            <div class="card">
              <h2>Accounts</h2>
              <p class="muted">
                Live summary of projects and tasks owned by the Accounts
                department.
              </p>
              <table class="table">
                <thead>
                  <tr>
                    <th>Project</th>
                    <th>Type</th>
                    <th>Total Tasks</th>
                    <th>Open</th>
                    <th>Completed</th>
                  </tr>
                </thead>
                <tbody id="accounts-body"></tbody>
              </table>
            </div>
          </section>

          <!-- OPERATIONS: main requirement -->
          <section id="view-operations" class="view">
            <div class="subnav">
              <button
                class="subnav-item subnav-active"
                data-subview="ops-resources"
              >
                Add Resources
              </button>
              <button class="subnav-item" data-subview="ops-projects">
                Add Project (Name & Type)
              </button>
              <button class="subnav-item" data-subview="ops-tasks">
                Add Tasks to Project
              </button>
              <button class="subnav-item" data-subview="ops-assign">
                Assign Tasks to Individuals
              </button>
              <button class="subnav-item" data-subview="ops-share">
                Share to Email & Dashboard
              </button>
              <button class="subnav-item" data-subview="ops-admin-dash">
                Admin / Project Dashboard
              </button>
              <button class="subnav-item" data-subview="ops-individual-dash">
                Individual Dashboard
              </button>
            </div>

            <!-- Operations - Add Resources -->
            <div
              id="ops-resources"
              class="subview subview-active two-column"
            >
              <div class="card">
                <h2>Add Resources</h2>
                <form id="form-resource" class="form-grid">
                  <label>
                    Full Name
                    <input
                      type="text"
                      name="name"
                      placeholder="Enter resource name"
                      required
                    />
                  </label>
                  <label>
                    Role
                    <input
                      type="text"
                      name="role"
                      placeholder="Designer, Developer, etc."
                      required
                    />
                  </label>
                  <label>
                    Department
                    <select name="department" required>
                      <option value="">Select department</option>
                      <option>Marketing</option>
                      <option>Sales</option>
                      <option>Accounts</option>
                      <option>Operations</option>
                      <option>Human Resources</option>
                      <option>Client Service</option>
                    </select>
                  </label>
                  <label>
                    Email
                    <input
                      type="email"
                      name="email"
                      placeholder="name@example.com"
                      required
                    />
                  </label>
                  <button type="submit" class="btn-primary">
                    Save Resource
                  </button>
                </form>
              </div>
              <div class="card">
                <h3>Resources</h3>
                <table class="table" id="table-resources">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Role</th>
                      <th>Department</th>
                      <th>Email</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <!-- Operations - Add Project -->
            <div id="ops-projects" class="subview">
              <div class="card" style="max-width: 900px; margin: 0 auto;">
                <h2>New Project</h2>
                <form id="form-project" class="form-grid">
                  <label style="grid-column: 1 / -1;">
                    Project Title *
                    <input
                      type="text"
                      name="name"
                      placeholder="Enter project title"
                      required
                    />
                  </label>
                  <label>
                    Owner
                    <select name="ownerId" id="select-project-owner">
                      <option value="">Select owner</option>
                    </select>
                  </label>
                  <label>
                    Template
                    <select name="template">
                      <option value="">Select template</option>
                      <option>Standard Template</option>
                      <option>Agile Template</option>
                      <option>Waterfall Template</option>
                      <option>Custom Template</option>
                    </select>
                  </label>
                  <label>
                    Start Date
                    <input type="date" name="startDate" required />
                  </label>
                  <label>
                    End Date
                    <input type="date" name="endDate" required />
                  </label>
                  <label>
                    Department *
                    <select name="department" required>
                      <option value="">Select department</option>
                      <option>Marketing</option>
                      <option>Sales</option>
                      <option>Accounts</option>
                      <option>Operations</option>
                      <option>Human Resources</option>
                      <option>Client Service</option>
                    </select>
                  </label>
                  <label>
                    Project Type
                    <input
                      type="text"
                      name="type"
                      placeholder="Internal, Client, Campaign..."
                    />
                  </label>
                  <label>
                    Priority
                    <select name="priority">
                      <option value="none">None</option>
                      <option value="low">Low</option>
                      <option value="medium">Medium</option>
                      <option value="high">High</option>
                    </select>
                  </label>
                  <label>
                    Business Hours
                    <select name="businessHours">
                      <option value="standard">Standard Business Hours</option>
                      <option value="24/7">24/7</option>
                      <option value="custom">Custom</option>
                    </select>
                  </label>
                  <label>
                    Task Layout
                    <select name="taskLayout">
                      <option value="standard">Standard Layout</option>
                      <option value="kanban">Kanban Board</option>
                      <option value="list">List View</option>
                      <option value="timeline">Timeline View</option>
                    </select>
                  </label>
                  <label>
                    Project Group
                    <select name="projectGroup">
                      <option value="">Select group</option>
                      <option>Q1 Projects</option>
                      <option>Q2 Projects</option>
                      <option>Q3 Projects</option>
                      <option>Q4 Projects</option>
                      <option>Ongoing</option>
                    </select>
                  </label>
                  <label>
                    Tags
                    <input
                      type="text"
                      name="tags"
                      placeholder="Enter tags (comma separated)"
                    />
                  </label>
                  <label style="grid-column: 1 / -1;">
                    Description
                    <textarea
                      name="description"
                      placeholder="Type @ to mention users. Type # to mention a Task or an Issue."
                      rows="4"
                    ></textarea>
                  </label>
                  <div style="grid-column: 1 / -1; margin-top: 0.5rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; flex-direction: row;">
                      <input type="checkbox" name="strictProject" />
                      <span>Make this a strict project</span>
                    </label>
                  </div>
                  <div style="grid-column: 1 / -1; margin-top: 0.5rem;">
                    <details style="margin-top: 0.5rem;">
                      <summary style="cursor: pointer; font-weight: 500; margin-bottom: 0.5rem;">Roll-up</summary>
                      <label style="display: flex; align-items: center; gap: 0.5rem; flex-direction: row; margin-top: 0.5rem;">
                        <input type="checkbox" name="rollup" />
                        <span>Enable this option to roll-up dates from Tasks/subtasks to projects and Phases. Work hours, time logs, and % completion will roll-up from subtasks to Tasks.</span>
                      </label>
                    </details>
                  </div>
                  <div style="grid-column: 1 / -1; display: flex; gap: 0.75rem; margin-top: 1rem;">
                    <button type="submit" class="btn-primary">
                      Add Project
                    </button>
                    <button type="button" class="btn-secondary" onclick="document.getElementById('form-project').reset();">
                      Cancel
                    </button>
                  </div>
                </form>
              </div>
              <div class="card">
                <h3>Projects</h3>
                <table class="table" id="table-projects">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Department</th>
                      <th>Duration</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <!-- Operations - Add Tasks -->
            <div id="ops-tasks" class="subview">
              <div class="card" style="max-width: 900px; margin: 0 auto;">
                <h2>New Task</h2>
                <form id="form-task" class="form-grid">
                  <label>
                    Project *
                    <select name="projectId" id="select-task-project" required>
                      <option value="">Select project</option>
                    </select>
                  </label>
                  <label>
                    Task Owner
                    <select name="taskOwnerId" id="select-task-owner">
                      <option value="">Select owner</option>
                    </select>
                  </label>
                  <label style="grid-column: 1 / -1;">
                    Task Title *
                    <input
                      type="text"
                      name="title"
                      placeholder="Enter task title"
                      required
                    />
                  </label>
                  <label>
                    Priority
                    <select name="priority">
                      <option value="none">! None</option>
                      <option value="low">! Low</option>
                      <option value="medium">! Medium</option>
                      <option value="high">! High</option>
                    </select>
                  </label>
                  <label>
                    Start Date
                    <input type="date" name="startDate" />
                  </label>
                  <label>
                    Due Date
                    <input type="date" name="dueDate" />
                  </label>
                  <label>
                    Estimated Hours
                    <input
                      type="number"
                      name="estimate"
                      min="0"
                      step="0.5"
                      placeholder="e.g. 8"
                    />
                  </label>
                  <label>
                    Time
                    <input
                      type="time"
                      name="time"
                      value="09:00"
                    />
                  </label>
                  <label style="grid-column: 1 / -1;">
                    Description
                    <textarea
                      name="description"
                      placeholder="Type @ to mention users. Type # to mention a Task or an Issue."
                      rows="4"
                    ></textarea>
                  </label>
                  <label style="grid-column: 1 / -1;">
                    Notify users associated with the Task
                    <select name="notifyUsers" id="select-task-notify" multiple style="min-height: 100px;">
                      <option value="po">PO - Project Owner</option>
                      <option value="to">TO - Task Owner</option>
                      <option value="tc">TC - Task Created By</option>
                      <option value="tf">TF - Task Followers</option>
                    </select>
                    <small style="color: var(--text-soft); font-size: 0.75rem;">Hold Ctrl/Cmd to select multiple</small>
                  </label>
                  <div style="grid-column: 1 / -1; display: flex; gap: 0.75rem; margin-top: 1rem;">
                    <button type="submit" class="btn-primary">
                      Add Task
                    </button>
                    <button type="button" class="btn-secondary" onclick="document.getElementById('form-task').reset();">
                      Cancel
                    </button>
                  </div>
                </form>
              </div>
              <div class="card" style="margin-top: 1.5rem;">
                <h3>All Tasks</h3>
                <table class="table" id="table-tasks">
                  <thead>
                    <tr>
                      <th>Project</th>
                      <th>Task</th>
                      <th>Priority</th>
                      <th>Status</th>
                      <th>Est. Hours</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <!-- Operations - Assign Tasks -->
            <div id="ops-assign" class="subview two-column">
              <div class="card">
                <h2>Assign Tasks to Individuals</h2>
                <form id="form-assignment" class="form-grid">
                  <label>
                    Project
                    <select
                      name="projectId"
                      id="select-assign-project"
                      required
                    >
                      <option value="">Select project</option>
                    </select>
                  </label>
                  <label>
                    Task
                    <select name="taskId" id="select-assign-task" required>
                      <option value="">Select task</option>
                    </select>
                  </label>
                  <label>
                    Resource
                    <select
                      name="resourceId"
                      id="select-assign-resource"
                      required
                    >
                      <option value="">Select individual</option>
                    </select>
                  </label>
                  <label>
                    Due Date
                    <input type="date" name="dueDate" required />
                  </label>
                  <button type="submit" class="btn-primary">
                    Assign Task
                  </button>
                </form>
              </div>
              <div class="card">
                <h3>Assignments</h3>
                <table class="table" id="table-assignments">
                  <thead>
                    <tr>
                      <th>Project</th>
                      <th>Task</th>
                      <th>Individual</th>
                      <th>Due</th>
                      <th>Status</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <!-- Operations - Share -->
            <div id="ops-share" class="subview two-column">
              <div class="card">
                <h2>Share to Designated Emails & Dashboards</h2>
                <p class="muted">
                  This simulates sending task details to the individual’s email
                  and updating their dashboard. Select an assignment and click
                  "Share". In a real system this would connect to your email
                  server.
                </p>
                <form id="form-share" class="form-grid">
                  <label>
                    Assignment
                    <select
                      name="assignmentId"
                      id="select-share-assignment"
                      required
                    >
                      <option value="">Select assignment</option>
                    </select>
                  </label>
                  <label>
                    Message (optional)
                    <textarea
                      name="message"
                      rows="3"
                      placeholder="Additional notes to include in the notification"
                    ></textarea>
                  </label>
                  <button type="submit" class="btn-primary">Share</button>
                </form>
              </div>
              <div class="card">
                <h3>Share History</h3>
                <ul class="activity-list" id="share-log"></ul>
              </div>
            </div>

            <!-- Operations - Admin / Project Dashboard -->
            <div id="ops-admin-dash" class="subview two-column">
              <div class="card">
                <h2>Admin & Project Dashboard</h2>
                <div class="cards-grid compact">
                  <div class="kpi-card card">
                    <h3>Projects</h3>
                    <p class="kpi-value" id="admin-total-projects">0</p>
                  </div>
                  <div class="kpi-card card">
                    <h3>Tasks</h3>
                    <p class="kpi-value" id="admin-total-tasks">0</p>
                  </div>
                  <div class="kpi-card card">
                    <h3>Completed</h3>
                    <p class="kpi-value" id="admin-completed-tasks">0</p>
                  </div>
                  <div class="kpi-card card">
                    <h3>On‑time %</h3>
                    <p class="kpi-value" id="admin-on-time">0%</p>
                  </div>
                </div>
                <h3 style="margin-top: 1.5rem">Project Breakdown</h3>
                <table class="table" id="table-admin-projects">
                  <thead>
                    <tr>
                      <th>Project</th>
                      <th>Department</th>
                      <th>Tasks</th>
                      <th>Completed</th>
                      <th>On‑time %</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
              <div class="card">
                <h3>Timeline (sample)</h3>
                <p class="muted">
                  A simple textual "chart" showing how many tasks are due by
                  week. This can be replaced with a real charting library
                  later.
                </p>
                <ul class="activity-list" id="admin-timeline"></ul>
              </div>
            </div>

            <!-- Operations - Individual Dashboard -->
            <div id="ops-individual-dash" class="subview two-column">
              <div class="card">
                <h2>Individual Dashboard</h2>
                <form class="form-grid" id="form-individual-filter">
                  <label>
                    Individual
                    <select
                      name="resourceId"
                      id="select-individual-resource"
                      required
                    >
                      <option value="">Select individual</option>
                    </select>
                  </label>
                  <button type="submit" class="btn-secondary">
                    View Performance
                  </button>
                </form>
                <div class="cards-grid compact">
                  <div class="kpi-card card">
                    <h3>Assigned</h3>
                    <p
                      class="kpi-value"
                      id="individual-total-assigned"
                    >
                      0
                    </p>
                  </div>
                  <div class="kpi-card card">
                    <h3>Completed</h3>
                    <p
                      class="kpi-value"
                      id="individual-total-completed"
                    >
                      0
                    </p>
                  </div>
                  <div class="kpi-card card">
                    <h3>On‑time %</h3>
                    <p class="kpi-value" id="individual-on-time">0%</p>
                  </div>
                </div>
                <h3 style="margin-top: 1.5rem">
                  Project & Task Performance
                </h3>
                <table class="table" id="table-individual-tasks">
                  <thead>
                    <tr>
                      <th>Project</th>
                      <th>Task</th>
                      <th>Due</th>
                      <th>Status</th>
                      <th>Mark Complete</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
              <div class="card">
                <h3>Performance Summary</h3>
                <ul class="activity-list" id="individual-summary"></ul>
              </div>
            </div>
          </section>

          <!-- HR -->
          <section id="view-hr" class="view">
            <div class="card">
              <h2>Human Resources</h2>
              <p class="muted">
                Snapshot based on live resources and tasks. Numbers update as
                you add team members and assignments.
              </p>
              <table class="table">
                <thead>
                  <tr>
                    <th>Metric</th>
                    <th>Value</th>
                  </tr>
                </thead>
                <tbody id="hr-body"></tbody>
              </table>
            </div>
          </section>

          <!-- Client Service -->
          <section id="view-service" class="view">
            <div class="card">
              <h2>Client Service</h2>
              <p class="muted">
                View of workload for Client Service based on current projects,
                tasks, and assignments in Operations.
              </p>
              <table class="table">
                <thead>
                  <tr>
                    <th>Project</th>
                    <th>Total Tasks</th>
                    <th>Open</th>
                    <th>Completed</th>
                  </tr>
                </thead>
                <tbody id="service-body"></tbody>
              </table>
            </div>
          </section>
        </section>
      </main>
    </div>

    <script src="app.js"></script>
  </body>
</html>


